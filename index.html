---
layout: default
title: LeapJS-Plugins by Leap Motion
---

<script type="text/javascript">
// this little hack redirects the default github root url, to what's been generated by jeykll.
if (window.location.hostname == "leapmotion.github.io" && ['/leapjs-plugins/', 'leapjs-plugins/index.html'].indexOf(window.location.pathname) != -1){
  window.location = "/leapjs-plugins/docs"
}

var controller = new Leap.Controller();
  controller.connect()
</script>

<section>
<a name="#hand-entry"></a>
{% markdown %}

{% include /main/hand-entry.md %}

{% endmarkdown %}

</section>



<section id="hand-hold">
<a name="#hand-hold"></a>
{% markdown %}

{% include /main/hand-hold.md %}

{% endmarkdown %}


<ul class="nav nav-tabs">
  <li class="active"><a href="#hand-hold-coffee" data-toggle="tab">Coffee</a></li>
  <li><a href="#hand-hold-js" data-toggle="tab">JS</a></li>
  <li><a href="#hand-hold-demo" data-toggle="tab">Demo</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="hand-hold-coffee">
<pre class="highlight-coffee"><code>{% highlight coffee %}
# Calculates how much a hand has changed pitch in the last few seconds.
Leap.Controller.plugin 'sumPitch', (options = {})->
  timeWindow = options.timeWindow || 1 # seconds

  # delta of both hands are combined
  pitchData = []
  {
    hand: (hand)->
      # skip momentary hands
      if hand.timeVisible < 1
        return

      # initial pass
      # we namespace our keys under sumPitch
      lastPitch = hand.data('sumPitch.lastPitch')
      currentPitch = hand.pitch()
      hand.data('sumPitch.lastPitch', currentPitch)

      return unless lastPitch

      # store values with timestamps
      now = Date.now()
      pitchData.push({
        delta: currentPitch - lastPitch,
        time: now
      })

      # manage rolling sum
      while pitchData[0].time < (now - (timeWindow * 1000))
        pitchData.shift()

      hand.sumPitch = 0
      for data in pitchData
        hand.sumPitch += Math.abs(data.delta)
  }

# The controller has already been initialized at the top of the page.  Otherwise:
# controller = new Leap.Controller();
#   controller.connect()
window.handHoldDemo = $('#hand-hold-demo')
controller.on 'frame', (frame)->
  if frame.hands[0]
    handHoldDemo.html("frame id: #{frame.id} <br/>hand sumPitch (in the last second): #{frame.hands[0].sumPitch.toPrecision(3)}")
  else
    handHoldDemo.html('frame id: ' + frame.id + ' <br/>no hand present.');
{% endhighlight %}</code></pre>
  </div>
  <div class="tab-pane" id="hand-hold-js">
    <pre class="highlight-js"><code>{% highlight javascript %}{% include /main/hand-hold.js %}{% endhighlight %}</code></pre>
  </div>
  <div class="tab-pane demo" id="hand-hold-demo">No Leap Device Attached</div>
</div>

<script type="text/javascript">
{% include /main/hand-hold.js %}
</script>

</section>

<section>
<a name="screen-position"></a>
{% markdown %}

{% include /main/screen-position.md %}

{% endmarkdown %}



<ul class="nav nav-tabs">
  <li class="active"><a href="#screen-position-coffee" data-toggle="tab">Coffee</a></li>
  <li><a href="#screen-position-js" data-toggle="tab">JS</a></li>
  <li><a href="#screen-position-demo" data-toggle="tab">Demo</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="screen-position-coffee">
<pre class="highlight-coffee"><code>{% highlight coffee %}
window.handHoldDemoCursor = $('#screen-position-demo .cursor')
window.handHoldDemoOutput = $('#screen-position-demo .output')
controller
  .use('screenPosition', {scale: 8})
  .on('frame', (frame)->
    if hand = frame.hands[0]
      handHoldDemoOutput.html("[<br/>&nbsp;&nbsp;#{hand.screenPosition()[0]}
        <br/>&nbsp;&nbsp;#{hand.screenPosition()[1]}
        <br/>&nbsp;&nbsp;#{hand.screenPosition()[2]}<br/>]")
      handHoldDemoCursor.css(
        left: hand.screenPosition()[0],
        bottom: hand.screenPosition()[1]
      )
  ).on('deviceConnected', ->
    $('#screen-position-demo .noleap').remove()
  )
{% endhighlight %}</code></pre>
  </div>
  <div class="tab-pane" id="screen-position-js">
    <pre class="highlight-js"><code>{% highlight javascript %}{% include /main/screen-position.js %}{% endhighlight %}</code></pre>
  </div>
  <div class="tab-pane demo" id="screen-position-demo">
    <div class="cursor"></div>
    <div class="output"></div>
    <span class="noleap">No Leap Device Attached</span>
  </div>
</div>

<script type="text/javascript">
  {% include /main/screen-position.js %}
</script>

</section>

<section>
  <a name="version-check"></a>
  {% markdown %}

  {% include /main/version-check.md %}

  {% endmarkdown %}
</section>


<section>
  <a name="playback"></a>
  {% markdown %}

  {% include /main/playback.md %}

  {% endmarkdown %}
</section>
