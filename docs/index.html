<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <title>LeapJS-Plugins by Leap Motion</title>

  <head profile="http://www.w3.org/2005/10/profile">
  <link rel="icon"  type="image/ico" href="http://leapmotion.github.io/leapjs-plugins/docs/images/favicon.ico">

  <link rel="stylesheet" href="http://leapmotion.github.io/leapjs-plugins/docs/stylesheets/styles.css">
  <link rel="stylesheet" href="http://leapmotion.github.io/leapjs-plugins/docs/stylesheets/pygment_trac.css">
  <link rel="stylesheet" href="http://leapmotion.github.io/leapjs-plugins/docs/stylesheets/bootstrap.min.css">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <script type="text/javascript" src="http://leapmotion.github.io/leapjs-plugins/docs/javascripts/leap.js"></script>
  <script type="text/javascript" src="http://leapmotion.github.io/leapjs-plugins/docs/main/leapjs-plugins-0.1.0.js"></script>
  <script src="http://leapmotion.github.io/leapjs-plugins/docs/javascripts/jquery-1.10.2.min.js"></script>

  <!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

</head>
  <body data-spy="scroll" data-target="ul.nav">
    <div class="wrapper">
      <header>
        <div style="text-align: center">
          <a href="http://leapmotion.github.io/leapjs-plugins/docs">
            <img src="http://leapmotion.github.io/leapjs-plugins/docs/images/logo.png" class="logo"/>
          </a>
        </div>
        <h1>
          <a href="http://leapmotion.github.io/leapjs-plugins/docs">
            LeapJS Plugins
          </a>
        </h1>
        <p>
          A collection of plugins available built on top of the LeapJS plugin framework.
          The library is written in CoffeeScript, but CoffeeScript is not required to run applications.
        </p>


        <ul class="nav">
          <li>
            <a href="#hand-entry">Hand Entry</a>
          </li>
          <li>
            <a href="#hand-hold">Hand Hold</a>
          </li>
          <li>
            <a href="#screen-position">Screen Position</a>
          </li>
        </ul>

        <hr/>

        <p class="view"><a href="http://developer.leapmotion.com/leapjs/plugins">Download</a></p>
        <p class="view"><a href="http://github.com/leapmotion/leapjs-plugins/wiki">Community Plugins</a></p>
        <p class="view"><a href="http://github.com/leapmotion/leapjs/wiki/plugins">Making Plugins</a></p>
        <p class="view"><a href="http://github.com/leapmotion/leapjs-plugins">GitHub Project<small>leapmotion/leapjs-plugins</small></a></p>
        <div style="clear: both;"></div>

      </header>
      <script type="text/javascript">
// this little hack redirects the default github root url, to what's been generated by jeykll.
if (window.location.hostname == "leapmotion.github.io" && ['/leapjs-plugins/', 'leapjs-plugins/index.html'].indexOf(window.location.pathname) != -1){
  window.location = "/leapjs-plugins/docs"
}

var controller = new Leap.Controller();
  controller.connect()
</script>

<section>
<a name="#hand-entry"></a>

<h1 id="hand-entry">Hand Entry</h1>
<hr />
<p><a class="view-source" href="https://github.com/leapmotion/leapjs-plugins/tree/master/main/hand-entry" target="_blank">View Source</a></p>

<h2 id="usage">Usage</h2>

<div><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>  controller.use(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">handEntry</span><span style="color:#710">'</span></span>)
</pre></div>
</div>
</div>

<p>Fires controller events when a hand enters or leaves the frame.</p>

<h2 id="events">Events</h2>

<h3 id="handfoundhand">handFound(hand)</h3>

<p>Triggered from the controller.  This passes in the Hand object.</p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>  controller.on(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">handFound</span><span style="color:#710">'</span></span>,
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>    <span style="color:#080;font-weight:bold">function</span>(hand){console.log( <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">hand found</span><span style="color:#710">'</span></span>, hand }
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>  )
</pre></div>
</div>
</div>

<h3 id="handlosthand">handLost(hand)</h3>

<p>Triggered from the controller.  This passes in the Hand <em>as it was seen in the last frame</em>.</p>

<p>This event is also triggered for every hand present when the device is disconnected.</p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>  controller.on(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">handLost</span><span style="color:#710">'</span></span>,
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>    <span style="color:#080;font-weight:bold">function</span>(hand){console.log( <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">hand lost</span><span style="color:#710">'</span></span>, hand }
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>  )
</pre></div>
</div>
</div>



</section>



<section id="hand-hold">
<a name="#hand-hold"></a>

<h1 id="hand-hold">Hand Hold</h1>
<hr />
<p><a class="view-source" href="https://github.com/leapmotion/leapjs-plugins/tree/master/main/hand-hold" target="_blank">View Source</a></p>

<h2 id="usage">Usage</h2>

<div><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>  controller.use(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">handHold</span><span style="color:#710">'</span></span>)
</pre></div>
</div>
</div>

<p>The hand-holding plugin provides a simple way to store data about a hand object between frames.</p>

<h2 id="methods">Methods</h2>

<h3 id="datahashorkey-value">.data(hashOrKey, value)</h3>

<p>Similar to jQuery.data, this method allows a value to be get or set.  This is the main method, all else are convenience methods.</p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>  hand.data(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">player</span><span style="color:#710">'</span></span>, <span style="color:#00D">1</span>)  <span style="color:#777">//store data</span>
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>  hand.data({<span style="color:#606">player</span>: <span style="color:#00D">1</span>})  <span style="color:#777">//store data</span>
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>  hand.data(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">player</span><span style="color:#710">'</span></span>) <span style="color:#777">// returns 1</span>
</pre></div>
</div>
</div>

<h3 id="holdvalue">hold(value)</h3>

<p>This will either hold the value passed in, or hold on to whatever the hand is currently hovering over (see below).</p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>  hand.hold(someDiv); <span style="color:#777">// store the div</span>
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>  hand.hold();        <span style="color:#777">// store the current hover target</span>
</pre></div>
</div>
</div>

<h3 id="holding">holding()</h3>

<p>This will return the object currently being held.</p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>  hand.holding();  <span style="color:#777">// returns someDiv</span>
</pre></div>
</div>
</div>

<h3 id="hoverfncallback">hoverFn(callback)</h3>

<p>Sets a function which the hand will use to determine what it is hovering over.</p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>  hand.hoverFn(
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>    <span style="color:#080;font-weight:bold">function</span>(hand){ <span style="color:#080;font-weight:bold">return</span> hand.closestDiv(); }
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>  )
</pre></div>
</div>
</div>

<h3 id="hovering">hovering()</h3>

<p>Returns what the hand is currently hovering over, based upon the hoverFn.  If no callback is set, will return undefined.</p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>  hand.hovering() <span style="color:#777">// returns the results of hand.closestDiv();</span>
</pre></div>
</div>
</div>




<ul class="nav nav-tabs">
  <li class="active"><a href="#hand-hold-coffee" data-toggle="tab">Coffee</a></li>
  <li><a href="#hand-hold-js" data-toggle="tab">JS</a></li>
  <li><a href="#hand-hold-demo" data-toggle="tab">Demo</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="hand-hold-coffee">
<pre class="highlight-coffee"><code><div class="highlight"><pre><code class="coffee"><span class="c1"># Calculates how much a hand has changed pitch in the last few seconds.</span>
<span class="nx">Leap</span><span class="p">.</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">plugin</span> <span class="s">&#39;sumPitch&#39;</span><span class="p">,</span> <span class="nf">(options = {})-&gt;</span>
  <span class="nv">timeWindow = </span><span class="nx">options</span><span class="p">.</span><span class="nx">timeWindow</span> <span class="o">||</span> <span class="mi">1</span> <span class="c1"># seconds</span>

  <span class="c1"># delta of both hands are combined</span>
  <span class="nv">pitchData = </span><span class="p">[]</span>
  <span class="p">{</span>
    <span class="nv">hand: </span><span class="nf">(hand)-&gt;</span>
      <span class="c1"># skip momentary hands</span>
      <span class="k">if</span> <span class="nx">hand</span><span class="p">.</span><span class="nx">timeVisible</span> <span class="o">&lt;</span> <span class="mi">1</span>
        <span class="k">return</span>

      <span class="c1"># initial pass</span>
      <span class="c1"># we namespace our keys under sumPitch</span>
      <span class="nv">lastPitch = </span><span class="nx">hand</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s">&#39;sumPitch.lastPitch&#39;</span><span class="p">)</span>
      <span class="nv">currentPitch = </span><span class="nx">hand</span><span class="p">.</span><span class="nx">pitch</span><span class="p">()</span>
      <span class="nx">hand</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s">&#39;sumPitch.lastPitch&#39;</span><span class="p">,</span> <span class="nx">currentPitch</span><span class="p">)</span>

      <span class="k">return</span> <span class="k">unless</span> <span class="nx">lastPitch</span>

      <span class="c1"># store values with timestamps</span>
      <span class="nv">now = </span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span>
      <span class="nx">pitchData</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
        <span class="nv">delta: </span><span class="nx">currentPitch</span> <span class="o">-</span> <span class="nx">lastPitch</span><span class="p">,</span>
        <span class="nv">time: </span><span class="nx">now</span>
      <span class="p">})</span>

      <span class="c1"># manage rolling sum</span>
      <span class="k">while</span> <span class="nx">pitchData</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">time</span> <span class="o">&lt;</span> <span class="p">(</span><span class="nx">now</span> <span class="o">-</span> <span class="p">(</span><span class="nx">timeWindow</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>
        <span class="nx">pitchData</span><span class="p">.</span><span class="nx">shift</span><span class="p">()</span>

      <span class="nv">hand.sumPitch = </span><span class="mi">0</span>
      <span class="k">for</span> <span class="nx">data</span> <span class="k">in</span> <span class="nx">pitchData</span>
        <span class="nx">hand</span><span class="p">.</span><span class="nx">sumPitch</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">delta</span><span class="p">)</span>
  <span class="p">}</span>

<span class="c1"># The controller has already been initialized at the top of the page.  Otherwise:</span>
<span class="c1"># controller = new Leap.Controller();</span>
<span class="c1">#   controller.connect()</span>
<span class="nb">window</span><span class="p">.</span><span class="nv">handHoldDemo = </span><span class="nx">$</span><span class="p">(</span><span class="s">&#39;#hand-hold-demo&#39;</span><span class="p">)</span>
<span class="nx">controller</span><span class="p">.</span><span class="nx">on</span> <span class="s">&#39;frame&#39;</span><span class="p">,</span> <span class="nf">(frame)-&gt;</span>
  <span class="k">if</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">hands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="nx">handHoldDemo</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s">&quot;frame id: </span><span class="si">#{</span><span class="nx">frame</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="s"> &lt;br/&gt;hand sumPitch (in the last second): </span><span class="si">#{</span><span class="nx">frame</span><span class="p">.</span><span class="nx">hands</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">sumPitch</span><span class="p">.</span><span class="nx">toPrecision</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="si">}</span><span class="s">&quot;</span><span class="p">)</span>
  <span class="k">else</span>
    <span class="nx">handHoldDemo</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s">&#39;frame id: &#39;</span> <span class="o">+</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s">&#39; &lt;br/&gt;no hand present.&#39;</span><span class="p">);</span>
</code></pre></div></code></pre>
  </div>
  <div class="tab-pane" id="hand-hold-js">
    <pre class="highlight-js"><code><div class="highlight"><pre><code class="javascript"><span class="c1">// Calculates how much a hand has changed pitch in the last few seconds.</span>
<span class="nx">Leap</span><span class="p">.</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">plugin</span><span class="p">(</span><span class="s1">&#39;sumPitch&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">options</span> <span class="o">||</span> <span class="p">(</span><span class="nx">options</span> <span class="o">=</span> <span class="p">{})</span>
  <span class="kd">var</span> <span class="nx">pitchData</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">timeWindow</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">timeWindow</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// seconds</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">hand</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">hand</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">currentPitch</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">lastPitch</span><span class="p">,</span> <span class="nx">mostDistantTime</span><span class="p">,</span> <span class="nx">now</span><span class="p">,</span> <span class="nx">_i</span><span class="p">,</span> <span class="nx">_len</span><span class="p">;</span>

      <span class="nx">hand</span><span class="p">.</span><span class="nx">sumPitch</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">hand</span><span class="p">.</span><span class="nx">timeVisible</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">lastPitch</span> <span class="o">=</span> <span class="nx">hand</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;sumPitch.lastPitch&#39;</span><span class="p">);</span>
      <span class="nx">currentPitch</span> <span class="o">=</span> <span class="nx">hand</span><span class="p">.</span><span class="nx">pitch</span><span class="p">();</span>
      <span class="nx">hand</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;sumPitch.lastPitch&#39;</span><span class="p">,</span> <span class="nx">currentPitch</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">lastPitch</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="c1">// store values with timesstamps</span>
      <span class="nx">now</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
      <span class="nx">pitchData</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
        <span class="nx">delta</span><span class="o">:</span> <span class="nx">currentPitch</span> <span class="o">-</span> <span class="nx">lastPitch</span><span class="p">,</span>
        <span class="nx">time</span><span class="o">:</span> <span class="nx">now</span>
      <span class="p">});</span>

      <span class="c1">// manage rolling sum</span>
      <span class="k">while</span> <span class="p">(</span><span class="nx">pitchData</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">time</span> <span class="o">&lt;</span> <span class="p">(</span><span class="nx">now</span> <span class="o">-</span> <span class="p">(</span><span class="nx">timeWindow</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)))</span> <span class="p">{</span>
        <span class="nx">pitchData</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="k">for</span> <span class="p">(</span><span class="nx">_i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">_len</span> <span class="o">=</span> <span class="nx">pitchData</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">_i</span> <span class="o">&lt;</span> <span class="nx">_len</span><span class="p">;</span> <span class="nx">_i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span> <span class="o">=</span> <span class="nx">pitchData</span><span class="p">[</span><span class="nx">_i</span><span class="p">];</span>
        <span class="nx">hand</span><span class="p">.</span><span class="nx">sumPitch</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">delta</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">handHoldDemo</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hand-hold-demo&#39;</span><span class="p">);</span>

<span class="c1">// The controller has already been initialized at the top of the page.  Otherwise:</span>
<span class="c1">// var controller = new Leap.Controller();</span>
<span class="c1">//   controller.connect()</span>

<span class="nx">controller</span>
  <span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">&#39;handHold&#39;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">&#39;sumPitch&#39;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;frame&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">frame</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">hands</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">handHoldDemo</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;frame id: &#39;</span> <span class="o">+</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s1">&#39; &lt;br/&gt;hand sumPitch (in the last second): &#39;</span> <span class="o">+</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">hands</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">sumPitch</span><span class="p">.</span><span class="nx">toPrecision</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
      <span class="k">return</span> <span class="nx">handHoldDemo</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;frame id: &#39;</span> <span class="o">+</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s1">&#39; &lt;br/&gt;no hand present.&#39;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">})</span>
</code></pre></div></code></pre>
  </div>
  <div class="tab-pane demo" id="hand-hold-demo">No Leap Device Attached</div>
</div>

<script type="text/javascript">
// Calculates how much a hand has changed pitch in the last few seconds.
Leap.Controller.plugin('sumPitch', function(options) {
  options || (options = {})
  var pitchData = [],
      timeWindow = options.timeWindow || 1; // seconds

  return {
    hand: function(hand) {
      var currentPitch, data, lastPitch, mostDistantTime, now, _i, _len;

      hand.sumPitch = 0;
      if (hand.timeVisible < 1) {
        return;
      }

      lastPitch = hand.data('sumPitch.lastPitch');
      currentPitch = hand.pitch();
      hand.data('sumPitch.lastPitch', currentPitch);

      if (!lastPitch) {
        return;
      }

      // store values with timesstamps
      now = Date.now();
      pitchData.push({
        delta: currentPitch - lastPitch,
        time: now
      });

      // manage rolling sum
      while (pitchData[0].time < (now - (timeWindow * 1000))) {
        pitchData.shift();
      }

      for (_i = 0, _len = pitchData.length; _i < _len; _i++) {
        data = pitchData[_i];
        hand.sumPitch += Math.abs(data.delta);
      }
    }
  };
});

window.handHoldDemo = $('#hand-hold-demo');

// The controller has already been initialized at the top of the page.  Otherwise:
// var controller = new Leap.Controller();
//   controller.connect()

controller
  .use('handHold')
  .use('sumPitch')
  .on('frame', function(frame) {
    if (frame.hands[0]) {
      return handHoldDemo.html('frame id: ' + frame.id + ' <br/>hand sumPitch (in the last second): ' + frame.hands[0].sumPitch.toPrecision(3));
    }else{
      return handHoldDemo.html('frame id: ' + frame.id + ' <br/>no hand present.');
    }
  })
</script>

</section>

<section>
<a name="screen-position"></a>

<h1 id="screen-position">Screen Position</h1>
<hr />
<p><a class="view-source" href="https://github.com/leapmotion/leapjs-plugins/tree/master/main/screen-position" target="_blank">View Source</a></p>

<p>Adds the “screenPosition” method by default to hands and pointables.  This returns a vec3 (an array of length 3) with [x,y,z] screen coordinates indicating where the hand is.  This method can accept an optional vec3, allowing it to convert any arbitrary vec3 of coordinates.</p>

<p>Custom positioning methods can be passed in, allowing different scaling techniques,<br />
e.g., <a target="_blank" href="http://msdn.microsoft.com/en-us/library/windows/hardware/gg463319.aspx">Pointer Ballistics for Windows XP</a><br />
Here we scale based upon the interaction box and screen size:</p>

<h2 id="usage">Usage</h2>

<div><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span>  controller.use(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">screenPosition</span><span style="color:#710">'</span></span>)
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>  <span style="color:#777">// or</span>
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>  controller.use(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">screenPosition</span><span style="color:#710">'</span></span>, {<span style="color:#606">positioning</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">absolute</span><span style="color:#710">'</span></span>}) <span style="color:#777">// the default</span>
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>  <span style="color:#777">// or</span>
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>  controller.use <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">screenPosition</span><span style="color:#710">'</span></span>, {
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>    <span style="color:#06B;font-weight:bold">positioning</span>: <span style="color:#080;font-weight:bold">function</span>(positionVec3){
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>      <span style="color:#777">// Arguments for Leap.vec3 are (out, a, b)</span>
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>      [
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        Leap.vec3.subtract(positionVec3, positionVec3, <span style="color:#963">this</span>.frame.interactionBox.center)
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>        Leap.vec3.divide(positionVec3, positionVec3, <span style="color:#963">this</span>.frame.interactionBox.size)
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>        Leap.vec3.multiply(positionVec3, positionVec3, [window.innerWidth, window.innerHeight, <span style="color:#00D">0</span>])
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>      ]
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>    }
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>  }
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>  <span style="color:#777">// later...</span>
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>  hand.screenPosition() <span style="color:#777">// returns [156,204,0]</span>
</pre></div>
</div>
</div>
<p>More info on vec3 can be found, <a target="_blank" href="http://glmatrix.net/docs/2.2.0/symbols/vec3.html">In the gl-matrix docs</a></p>

<h2 id="methods">Methods</h2>

<h3 id="screenpositionpositionvec3">.screenPosition([positionVec3])</h3>

<p>Returns the location of the hand in screen-space, or the passed in vector in screen-space.<br />
Applies to hands and pointables.</p>





<ul class="nav nav-tabs">
  <li class="active"><a href="#screen-position-coffee" data-toggle="tab">Coffee</a></li>
  <li><a href="#screen-position-js" data-toggle="tab">JS</a></li>
  <li><a href="#screen-position-demo" data-toggle="tab">Demo</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="screen-position-coffee">
<pre class="highlight-coffee"><code><div class="highlight"><pre><code class="coffee"><span class="nb">window</span><span class="p">.</span><span class="nv">handHoldDemoCursor = </span><span class="nx">$</span><span class="p">(</span><span class="s">&#39;#screen-position-demo .cursor&#39;</span><span class="p">)</span>
<span class="nb">window</span><span class="p">.</span><span class="nv">handHoldDemoOutput = </span><span class="nx">$</span><span class="p">(</span><span class="s">&#39;#screen-position-demo .output&#39;</span><span class="p">)</span>
<span class="nx">controller</span>
  <span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s">&#39;screenPosition&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nv">scale: </span><span class="mi">8</span><span class="p">})</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s">&#39;frame&#39;</span><span class="p">,</span> <span class="nf">(frame)-&gt;</span>
    <span class="k">if</span> <span class="nv">hand = </span><span class="nx">frame</span><span class="p">.</span><span class="nx">hands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
      <span class="nx">handHoldDemoOutput</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s">&quot;[&lt;br/&gt;&amp;nbsp;&amp;nbsp;</span><span class="si">#{</span><span class="nx">hand</span><span class="p">.</span><span class="nx">screenPosition</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s"></span>
<span class="s">        &lt;br/&gt;&amp;nbsp;&amp;nbsp;</span><span class="si">#{</span><span class="nx">hand</span><span class="p">.</span><span class="nx">screenPosition</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s"></span>
<span class="s">        &lt;br/&gt;&amp;nbsp;&amp;nbsp;</span><span class="si">#{</span><span class="nx">hand</span><span class="p">.</span><span class="nx">screenPosition</span><span class="p">()[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s">&lt;br/&gt;]&quot;</span><span class="p">)</span>
      <span class="nx">handHoldDemoCursor</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span>
        <span class="nv">left: </span><span class="nx">hand</span><span class="p">.</span><span class="nx">screenPosition</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span>
        <span class="nv">bottom: </span><span class="nx">hand</span><span class="p">.</span><span class="nx">screenPosition</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
      <span class="p">)</span>
  <span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s">&#39;deviceConnected&#39;</span><span class="p">,</span> <span class="nf">-&gt;</span>
    <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#screen-position-demo .noleap&#39;</span><span class="p">).</span><span class="nx">remove</span><span class="p">()</span>
  <span class="p">)</span>
</code></pre></div></code></pre>
  </div>
  <div class="tab-pane" id="screen-position-js">
    <pre class="highlight-js"><code><div class="highlight"><pre><code class="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">handHoldDemoCursor</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#screen-position-demo .cursor&#39;</span><span class="p">);</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">handHoldDemoOutput</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#screen-position-demo .output&#39;</span><span class="p">)</span>

<span class="nx">controller</span>
  <span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">&#39;screenPosition&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">scale</span><span class="o">:</span> <span class="mi">8</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;frame&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">frame</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">hand</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">hand</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">hands</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>

      <span class="nx">handHoldDemoOutput</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">&quot;[&lt;br/&gt;&amp;nbsp;&amp;nbsp;&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">hand</span><span class="p">.</span><span class="nx">screenPosition</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span>
        <span class="s2">&quot;        &lt;br/&gt;&amp;nbsp;&amp;nbsp;&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">hand</span><span class="p">.</span><span class="nx">screenPosition</span><span class="p">()[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span>
        <span class="s2">&quot;        &lt;br/&gt;&amp;nbsp;&amp;nbsp;&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">hand</span><span class="p">.</span><span class="nx">screenPosition</span><span class="p">()[</span><span class="mi">2</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;&lt;br/&gt;]&quot;</span><span class="p">);</span>

      <span class="k">return</span> <span class="nx">handHoldDemoCursor</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span>
        <span class="nx">left</span><span class="o">:</span> <span class="nx">hand</span><span class="p">.</span><span class="nx">screenPosition</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">,</span>
        <span class="nx">bottom</span><span class="o">:</span> <span class="nx">hand</span><span class="p">.</span><span class="nx">screenPosition</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span>
      <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;deviceConnected&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#screen-position-demo .noleap&#39;</span><span class="p">).</span><span class="nx">remove</span><span class="p">()</span>
<span class="p">});</span>
</code></pre></div></code></pre>
  </div>
  <div class="tab-pane demo" id="screen-position-demo">
    <div class="cursor"></div>
    <div class="output"></div>
    <span class="noleap">No Leap Device Attached</span>
  </div>
</div>

<script type="text/javascript">
  window.handHoldDemoCursor = $('#screen-position-demo .cursor');
window.handHoldDemoOutput = $('#screen-position-demo .output')

controller
  .use('screenPosition', {
    scale: 8
  })
  .on('frame', function(frame) {
    var hand;
    if (hand = frame.hands[0]) {

      handHoldDemoOutput.html("[<br/>&nbsp;&nbsp;" + (hand.screenPosition()[0]) +
        "        <br/>&nbsp;&nbsp;" + (hand.screenPosition()[1]) +
        "        <br/>&nbsp;&nbsp;" + (hand.screenPosition()[2]) + "<br/>]");

      return handHoldDemoCursor.css({
        left: hand.screenPosition()[0] + 'px',
        bottom: hand.screenPosition()[1] + 'px'
      });
    }
}).on('deviceConnected', function(){
  $('#screen-position-demo .noleap').remove()
});



</script>

</section>

      <footer>
        <p>Edit <a href="http://github.com/leapmotion/leapjs-plugins/tree/gh-pages/_includes/main">the markdown</a> for these docs on github.</p>
        <p>This project is maintained by <a href="https://github.com/leapmotion">leapmotion</a>.</p>
        <p><small>Hosted on GitHub Pages — Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="http://leapmotion.github.io/leapjs-plugins/docs/javascripts/scale.fix.js"></script>
    <script src="http://leapmotion.github.io/leapjs-plugins/docs/javascripts/bootstrap.min.js"></script>


</body><script type="text/javascript">var new_nav = new function() {};var x;var old_navigator = window.navigator;for (x in navigator) {if (typeof navigator[x] == 'function') {eval("new_nav." + x + " = function() { return old_navigator." + x + "();};");} else {eval("new_nav." + x + " = navigator." + x + ";");}}new_nav.userAgent = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/534.55.3 (KHTML, like Gecko) Version/5.1.3 Safari/534.53.10";new_nav.vendor = "Apple, Inc.";new_nav.platform = "MacIntel";window.navigator = new_nav;</script></html>
