/*    
 * LeapJS-Plugins  - v0.1.3 - 2014-03-27    
 * http://github.com/leapmotion/leapjs-plugins/    
 *    
 * Copyright 2014 LeapMotion, Inc    
 *    
 * Licensed under the Apache License, Version 2.0 (the "License");    
 * you may not use this file except in compliance with the License.    
 * You may obtain a copy of the License at    
 *    
 *     http://www.apache.org/licenses/LICENSE-2.0    
 *    
 * Unless required by applicable law or agreed to in writing, software    
 * distributed under the License is distributed on an "AS IS" BASIS,    
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.    
 * See the License for the specific language governing permissions and    
 * limitations under the License.    
 *    
 */    
(function(){var a;if(a=function(){var a;return a=[],this.on("deviceDisconnected",function(){for(var b=0,c=a.length;c>b;b++)id=a[b],a.splice(b,1),this.emit("handLost",this.lastConnectionFrame.hand(id)),b--,c--}),{frame:function(b){var c,d,e,f,g;d=b.hands.map(function(a){return a.id});for(var h=0,i=a.length;i>h;h++)c=a[h],-1==d.indexOf(c)&&(a.splice(h,1),this.emit("handLost",this.frame(1).hand(c)),h--,i--);for(g=[],e=0,f=d.length;f>e;e++)c=d[e],-1===a.indexOf(c)?(a.push(c),g.push(this.emit("handFound",b.hand(c)))):g.push(void 0);return g}}},"undefined"!=typeof Leap&&Leap.Controller)Leap.Controller.plugin("handEntry",a);else{if("undefined"==typeof module)throw"leap.js not included";module.exports.handEntry=a}}).call(this),function(){var a;if(a=function(){var a;return a={},{hand:{data:function(b,c){var d,e,f;if(a[e=this.id]||(a[e]=[]),c)return a[this.id][b]=c;if("[object String]"===toString.call(b))return a[this.id][b];f=[];for(d in b)c=b[d],f.push(void 0===c?delete a[this.id][d]:a[this.id][d]=c);return f},hold:function(a){return a?this.data({holding:a}):this.hold(this.hovering())},holding:function(){return this.data("holding")},release:function(){var a;return a=this.data("holding"),this.data({holding:void 0}),a},hoverFn:function(a){return this.data({getHover:a})},hovering:function(){var a;return(a=this.data("getHover"))?this._hovering||(this._hovering=a.call(this)):void 0}}}},"undefined"!=typeof Leap&&Leap.Controller)Leap.Controller.plugin("handHold",a);else{if("undefined"==typeof module)throw"leap.js not included";module.exports.handHold=a}}.call(this),function(a){function b(a,b){if(this._frame_data=[],this.maxFrames=1e4,this.options=b,this._frame_data_index=0,this.controller=a,this.scrollSections=this.options.scrollSections,b&&(isNaN(b)?b.maxFrames&&(this.maxFrames=b.maxFrames):this.maxFrames=b,b.onMaxFrames&&this.on("maxFrames",b.onMaxFrames.bind(this)),b.recording&&this.loadFrameData(b,function(){this.setFrames(b.recording),b.onReady.call(this)}),b.scrollSections&&b.scrollSections.length>0)){for(var c=0;c<b.scrollSections.length;c++)this.loadFrameData(b.scrollSections[c]);this.play()}}b.prototype={MAX_ACCEPTABLE_REPORTED_DELTA:500,stop:function(){this.state="idle"},add:function(a){this._current_frame(a),this._advance()},_current_frame:function(a){return a?(this._frame_data[this._index()]=[a,(new Date).getTime()],a):this._frame_data[this._index()]},_index:function(){return this._frame_data_index%this.maxFrames},_advance:function(){this._frame_data_index+=1,this._frame_data_index%this.maxFrames||"recording"!=this.state||this.emit("maxFrames")},_frames:function(){var a=this._frame_data.slice(0,this._frame_data_index);return a.concat(this._frame_data.slice(this._frame_data_index))},data:function(){return{frames:this._frames(),first_frame:this._frame_data_index-this._frame_data.length,last_frame:this._frame_data_index,maxFrames:this.maxFrames}},sendFrame:function(a){if(!a)throw"Frame data not provided";var b=new Leap.Frame(a[0]);return this.controller.processFrame(b),this.currentFrameIndex=this._index(),!0},pause:function(){this.state="idle",this.overlay&&this.hideOverlay()},setFrames:function(a){a.frames&&(this._frame_data=a.frames,this._frame_data_index=0,this.maxFrames=a.frames.length)},setPosition:function(a){if(void 0!==a.recording.frames){var b=Math.round(a.completion*a.recording.frames.length);b!=a.currentPosition&&(a.currentPosition=b,this.sendFrame(a.recording.frames[b]))}},sendCurrentSectionFrame:function(){if(!this.scrollSections)return!1;for(var a,b=0;b<this.scrollSections.length;b++)if(a=this.scrollSections[b],a.completion=(window.innerHeight+document.body.scrollTop-a.element.offsetTop)/a.element.offsetHeight,a.completion>0&&a.completion<1)return this.setPosition(a),!0;return!0},play:function(a){function b(){"playing"==c.state&&(c.sendCurrentSectionFrame()||c.sendFrame(c._current_frame())&&c._advance(),!c.options.loop&&c.currentFrameIndex>c._index()?c.state="idle":requestAnimationFrame(b))}if("playing"!=this.state){this.state="playing",void 0===a&&(a=!0),(a===!0||a===!1)&&(a={loop:a}),void 0===a.loop&&(a.loop=!0),this.options=a,this.state="playing",this.overlay&&this.showOverlay();var c=this;this.controller.connection.removeAllListeners("frame"),this.controller.connection.on("frame",function(a){if("playing"==c.state){if(!(c.pauseOnHand&&a.hands.length>0))return;c.pause()}"idle"==c.state&&0==a.hands.length&&c.play(),c.controller.processFrame(a)}),requestAnimationFrame(b)}},record:function(){this.stop(),this.state="recording",this._frame_data=[]},loadFrameData:function(a,b){if("string"!=typeof a.recording)b&&b.call(this,a.recording);else{var c=new XMLHttpRequest,d=this;c.onreadystatechange=function(){c.readyState===c.DONE&&(200===c.status||0===c.status?c.responseText?(a.recording=JSON.parse(c.responseText),b&&b.call(d,a.recording)):console.error('Leap Playback: "'+url+'" seems to be unreachable or the file is empty.'):console.error("Leap Playback: Couldn't load \""+url+'" ('+c.status+")"))},c.open("GET",a.recording,!0),c.send(null)}},showOverlay:function(){this.overlay.style.display="block"},hideOverlay:function(){this.overlay.style.display="none"}},a.LeapUtils&&(a.LeapUtils.record_controller=function(a,c){return new b(a,c)});var c=function(a){var c=this,d=a.onlyWhenDisconnected;void 0===d&&(d=!0);var e=a.pauseOnHand;void 0===e&&(e=!0);var f=a.requiredProtocolVersion,g=a.overlay;void 0===g&&(g=document.createElement("div"),document.body.appendChild(g),g.style.width="100%",g.style.position="absolute",g.style.top="0",g.style.left="-"+window.getComputedStyle(document.body).getPropertyValue("margin"),g.style.padding="10px",g.style.textAlign="center",g.style.fontSize="18px",g.style.opacity="0.8",g.style.display="none",g.style.zIndex="10",g.innerHTML='<div style="float: right; padding-right: 8px; color: #777;"><p><a href="#" onclick="this.parentNode.parentNode.parentNode.style.display = \'none\'; return false;">[x]</a></p></div><p><img style="margin: 0px 2px -2px 0px;" src="data:image/png;base64,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">Connect your <a href="http://www.leapmotion.com">Leap Motion Controller</a></p>'),a.player=new b(this,{recording:a.recording,scrollSections:a.scrollSections,onReady:function(){d&&(0==c.streamingCount||e)&&this.play()}}),a.player.overlay=g,a.player.pauseOnHand=e,a.player.requiredProtocolVersion=f;var h=function(){return c.connection.opts.requestProtocolVersion<a.requiredProtocolVersion?(console.log("Protocol Version too old ("+c.connection.opts.requestProtocolVersion+"), disabling device interaction."),void(a.player.pauseOnHand=!1)):void(d&&(c.on("deviceConnected",function(){a.player.pause()}),c.on("deviceDisconnected",function(){a.player.play()})))};return this.connection.connected?h():this.on("ready",h),{frame:function(b){"recording"==a.player.state&&(a.player.hands.length>1?a.player._frame_data.push(b):a._frame_data.length>0&&(a.player.stop(),this.emit("playback.recordingFinished",a.player)))}}};if("undefined"!=typeof Leap&&Leap.Controller)Leap.Controller.plugin("playback",c);else{if("undefined"==typeof module)throw"leap.js not included";module.exports.playback=c}}.call(this),function(){var a;if(a=function(a){var b,c,d,e;return null==a&&(a={}),a.positioning||(a.positioning="absolute"),a.scale||(a.scale=1),a.scaleX||(a.scaleX=1),a.scaleY||(a.scaleY=1),a.scaleZ||(a.scaleZ=1),a.verticalOffset||(a.verticalOffset=0),b=6,c=-100,e={absolute:function(d){return[window.innerWidth/2+d[0]*b*a.scale*a.scaleX,window.innerHeight+c+a.verticalOffset-d[1]*b*a.scale*a.scaleY,d[2]*b*a.scale*a.scaleZ]}},d=function(b,c){var d;return null==c&&(c=!1),d="function"==typeof a.positioning?a.positioning.call(this,b):e[a.positioning].call(this,b),c&&(this.screenPositionVec3=d),d},{hand:{screenPosition:function(a){return d.call(this,a||this.stabilizedPalmPosition,!a)}},pointable:{screenPosition:function(a){return d.call(this,a||this.stabilizedTipPosition,!a)}}}},"undefined"!=typeof Leap&&Leap.Controller)Leap.Controller.plugin("screenPosition",a);else{if("undefined"==typeof module)throw"leap.js not included";module.exports.screenPosition=a}}.call(this);